#!/usr/bin/env python

import bdkd.datastore
import optparse

def main():
    usage = "usage: %prog [options]"
    epilog="Get a list of all configured Repositories."
    optparser = optparse.OptionParser(usage=usage, epilog=epilog)
    optparser.add_option('-v', '--verbose', action='store_true',
            help='Verbose mode: all resource details (default names only)')
    (options, args) = optparser.parse_args()

    repositories = bdkd.datastore.repositories()
    for name, repository in repositories.items():
        print(name)
        if options.verbose:
            print("\tCache path:\t{0}".format(repository.local_cache))
            print("\tWorking path:\t{0}".format(repository.working))
            print("\tStale time:\t{0}".format(repository.stale_time))

if __name__ == "__main__":
    main()

